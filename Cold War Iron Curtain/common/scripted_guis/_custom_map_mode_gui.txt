scripted_gui = {
	custom_map_container_main = {
		context_type = player_context
		# dirty = global.monthly_gui_update_tick
		window_name = "custom_map_container_main"

		visible = {
			has_country_flag = custom_map_mode_visible
		}

		effects = {
			close_button_click = {
				clr_country_flag = custom_map_mode_visible
				add_to_variable = { global.monthly_gui_update_tick = 1 }
			}
			filter_entry_button_click = {
				set_country_flag = show_filter_list
			}
		}
		dynamic_lists = {
			selected_filter_gridbox = {
				array = selected_filter_array
				entry_container = filter_entry
			}
		}
	}
	custom_map_entry_window = {
		context_type = player_context
		#dirty = global.monthly_gui_update_tick
		window_name = "custom_map_entry_window"
		parent_window_name = "map_anchor"

		visible = {
			always = yes
		}

		triggers = {
		}
	}

	custom_map_container_move_box = {
		context_type = player_context
		#dirty = global.monthly_gui_update_tick
		window_name = "custom_map_container_move_box"
		parent_window_name = "custom_map_entry_window_instance"

		visible = {
		}

		effects = {
			node_map_marker_click = {
				add_to_variable = { global.monthly_gui_update_tick = 1 }
			}
		}

		triggers = {
			info_text_visible = {
				ROOT = { has_country_flag = custom_map_state_name_visible }
			}
			map_marker_bg_visible = {
				set_temp_variable = { temp_id = THIS.id }
				if = {
					limit = {
						check_variable = { ROOT.selected_filter_array^0 = 0}
					}
					set_temp_variable = {
						temp_frame = 2
					}
					if = {
						limit = {
							CONTROLLER = {
								has_idea = nato_member
							}
						}
						add_to_temp_variable = {
							temp_frame = -1
						}
					}
				}
				else_if = {
					limit = {
						check_variable = { ROOT.selected_filter_array^0 = 2 }
					}
					if = {
						limit = {
							is_controlled_by = ROOT
						}
						set_temp_variable = { temp_frame = 3 }
					}
					else_if = {
						limit = {
							CONTROLLER = {
								ROOT = {
									within_reachable_land_distance_of_prev = yes
								}
							}
						}
						set_temp_variable = {
							temp_frame = 2
						}
					}
					else = {
						set_temp_variable = {
							temp_frame = 0
						}
					}
				}
			}
			map_marker_shield_visible = {
				always = yes
			}
		}

		properties = {
			map_marker_bg = {
				x = map_x_position
				y = map_y_position
				image = "[GetStateImage]"
				frame = temp_frame
			}
			info_text = {
				x = map_x_position
				y = map_y_position
			}
			map_marker_shield = {
				x = x_composite
				y = y_composite
				image = "[GetStateOwnerFlag]"
			}
		}
		dynamic_lists = {
			node_marker_placement_gridbox = {
				array = global.states
				entry_container = state_marker_entry_box
				change_scope = yes
			}
			node_marker_placement_gridbox_countries = {
				array = global.countries
				entry_container = country_marker_entry_box
				change_scope = yes
			}
		}
	}
	filter_container_dropdown = {
		window_name = "filter_container_dropdown"
		parent_window_name = "filter_conatiner_anchor"
		#dirty = custom_map_mode_update_tick
		visible = {
			has_country_flag = show_filter_list
		}
		effects = {
			filter_entry_button_click = {
				if = {
					limit = {
						check_variable = { v = 1 }
					}
					## Set industrial complex mapmode
				}
				set_variable = { selected_filter_array^0 = v }
				clr_country_flag = show_filter_list
				add_to_variable = { custom_map_mode_update_tick = 1 }
			}
		}
		dynamic_lists = {
			filter_dropdown_gridbox = {
				array = global.filter_arrays
				entry_container = filter_entry
			}
		}
	}
}
