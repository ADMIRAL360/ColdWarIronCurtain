scripted_gui = {
	JAP_leadership_election_opener = {
		context_type = player_context
		parent_window_token = politics_tab
		window_name = JAP_leadership_election_open_window
		ai_enabled = { always = no }
		visible = {
			is_ai = no
			tag = JAP
		}
		effects = {
			JAP_leadership_election_open_button_click = {
				JAP_refresh_supports = yes
				for_loop_effect = {
					start = 1
					end = 3
					compare = less_than_or_equals
					add_to_array = { JAP_politics_decisions_window_array = v }
				}
				if = {
					limit = { has_country_flag = open_leadership_election_ui }
					clr_country_flag = open_leadership_election_ui
				}
				else = { set_country_flag = open_leadership_election_ui }
			}
		}
	}
	JAP_leadership_election_main = {
		window_name = JAP_leadership_election_main_window
		context_type = player_context
		visible = {
			has_country_flag = open_leadership_election_ui
			is_ai = no
			tag = JAP
		}
		triggers = {
			JAP_politics_decisions_window_button_click_enabled = { has_political_power > 49 }
		}
		ai_enabled = { always = no }
		dynamic_lists = {
			JAP_faction_leaders_window_grid = {
				array = JAP_faction_leaders_window_array
				index = JAP_faction_leaders_window_index
				change_scope = no
				entry_container = JAP_faction_leaders_window_entry
			}
			JAP_politics_decisions_window_grid = {
				array = JAP_politics_decisions_window_array
				index = JAP_politics_decisions_window_index
				change_scope = no
				entry_container = JAP_politics_decisions_window_entry
			}
		}
		effects = {
			JAP_leadership_election_main_close_button_click = {
				clear_array = JAP_politics_decisions_window_array
				if = {
					limit = { has_country_flag = open_leadership_election_ui }
					clr_country_flag = open_leadership_election_ui
				}
			}
			JAP_faction_buttons_click = { set_variable = { JAP_chosen_factions = JAP_faction_leaders_window_array^JAP_faction_leaders_window_index } }
			JAP_faction_piechart_cover_button_click = { JAP_refresh_supports = yes }
			JAP_politics_decisions_window_button_click = { JAP_politics_decisions_fire = yes }
		}
		properties = {
			JAP_faction_icons = { image = "[ROOT.GetFactionIcons]" }
			JAP_faction_leader_portraits = { image = "[ROOT.GetFactionLeaderPortraits]" }
			JAP_piechart_2 = { frame = JAP_pie_var_2 }
			JAP_piechart_3 = { frame = JAP_pie_var_3 }
			JAP_piechart_4 = { frame = JAP_pie_var_4 }
			JAP_piechart_5 = { frame = JAP_pie_var_5 }
			JAP_piechart_6 = { frame = JAP_pie_var_6 }
			JAP_piechart_7 = { frame = JAP_pie_var_7 }
			JAP_piechart_8 = { frame = JAP_pie_var_8 }
			JAP_piechart_9 = { frame = JAP_pie_var_9 }
			JAP_piechart_10 = { frame = JAP_pie_var_10 }
			JAP_piechart_11 = { frame = JAP_pie_var_11 }
			JAP_piechart_12 = { frame = JAP_pie_var_12 }
			JAP_piechart_13 = { frame = JAP_pie_var_13 }
			JAP_piechart_14 = { frame = JAP_pie_var_14 }
			JAP_piechart_15 = { frame = JAP_pie_var_15 }
			JAP_piechart_16 = { frame = JAP_pie_var_16 }
			JAP_piechart_17 = { frame = JAP_pie_var_17 }
			JAP_piechart_18 = { frame = JAP_pie_var_18 }
			JAP_piechart_19 = { frame = JAP_pie_var_19 }
			JAP_piechart_20 = { frame = JAP_pie_var_20 }
			JAP_piechart_21 = { frame = JAP_pie_var_21 }
			JAP_piechart_22 = { frame = JAP_pie_var_22 }
			JAP_piechart_23 = { frame = JAP_pie_var_23 }
			JAP_piechart_24 = { frame = JAP_pie_var_24 }
			JAP_piechart_25 = { frame = JAP_pie_var_25 }
			JAP_piechart_26 = { frame = JAP_pie_var_26 }
			JAP_piechart_27 = { frame = JAP_pie_var_27 }
			JAP_piechart_28 = { frame = JAP_pie_var_28 }
			JAP_piechart_29 = { frame = JAP_pie_var_29 }
			JAP_piechart_30 = { frame = JAP_pie_var_30 }
		}
	}
}
