scripted_gui = {

	trade_tab_menu = {
		context_type = player_context
		window_name = "trade_tab_menu"
		#dirty = refresh_wmd_menu

		visible = { 
			always = no
		 }

		triggers = {

			#WMD_Key_Left_0_visible = {
			#	check_variable = { 
			#		left_key_turned = 0 
			#	} 
			#}
			#defconbutton_raise_click_enabled = {
			#
			#}
		}

		effects = {
			#defconbutton_raise_click = {
			#}
		}
	}
	Chroium_Buy_Prompt = {

		context_type = player_context
		window_name = "PURCHASE_CHROMIUM"

		visible = { 
            check_variable = { chromium_prompt = 1 } 
		}
		properties = {
			country_flag_for_trade_screen = {
				image = "[this_trade_country.GetFlag]"
			}	
			root_flag_for_trade_screen = {
				image = "[ROOT.GetFlag]"
			}	
		}
		triggers = {
			decrease_chromium_click_enabled = {
				NOT = {
					check_variable = {
						purchase_amount = 0
					}
				}
			}
			increase_chromium_click_enabled = {
				var:currentPurchaser = {
					NOT = {
						check_variable = {
							ROOT.purchase_amount > currentAvailableChromiumExport
						}
					}
					NOT = {
						check_variable = {
							ROOT.purchase_amount = currentAvailableChromiumExport
						}
					}
				}
			}
		}
        effects = {
            increase_chromium_click = {
				add_to_variable = {
					purchase_amount = 1
				}
				set_variable = {
					purchase_desc = purchase_amount
				}
				multiply_variable = {
					purchase_desc = pricePerUnit
				}
				
            }
            decrease_chromium_click = {
				add_to_variable = {
					purchase_amount = -1
				}
				set_variable = {
					purchase_desc = purchase_amount
				}
				multiply_variable = {
					purchase_desc = pricePerUnit
				}
            }
			confirm_chromium_purchase_click = {
				set_variable = {
					chromium_prompt = 0
				}
			    buy_nuclear_material = yes
				set_variable = {
					purchase_desc = 0
				}
				set_variable = {
					pricePerUnit = 0
				}
				set_variable = {
					purchase_amount = 0
				}
			}
			cancel_button_click = {
				set_variable = {
					chromium_prompt = 0
				}
				set_variable = {
					purchase_desc = 0
				}
				set_variable = {
					pricePerUnit = 0
				}
				set_variable = {
					purchase_amount = 0
				}
			}
        } 
    }
	chromium_exporter_list = {
		context_type = player_context
		window_name = "chromium_export_list"
		parent_window_name = "countrytradeview"

		visible = {
			#always = no
		}

		triggers = {
			cancel_oil_imports_click_enabled = {
				check_variable = { oilImports > 0 }
			}
			cancel_aluminum_imports_click_enabled = {
				check_variable = { aluminiumImports > 0 }
			}
			cancel_food_imports_click_enabled = {
				check_variable = { foodImports > 0 }
			}
			cancel_rare_earth_imports_click_enabled = {
				check_variable = { rareEarthImports > 0 }
			}
			cancel_steel_imports_click_enabled = {
				check_variable = { steelImports > 0 }
			}
			cancel_nuclear_imports_click_enabled = {
				check_variable = { nuclearImports > 0 }
			}
			cancel_electricity_imports_click_enabled = {
				check_variable = { electricImports > 0 }
			}

			nuclear_button_sorted_visible = {
				check_variable = { nuclear_trade = 1 }
			}
			nuclear_button_sort_visible = {
				check_variable = { nuclear_trade = 0 }
			}
			steel_button_sorted_visible = {
				check_variable = { steel_trade = 1 }
			}
			steel_button_sort_visible = {
				check_variable = { steel_trade = 0 }
			}
			rare_earth_button_sorted_visible = {
				check_variable = { rare_earth_trade = 1 }
			}
			rare_earth_button_sort_visible = {
				check_variable = { rare_earth_trade = 0 }
			}
			food_button_sorted_visible = {
				check_variable = { food_trade = 1 }
			}
			food_button_sort_visible = {
				check_variable = { food_trade = 0 }
			}
			aluminum_button_sorted_visible = {
				check_variable = { aluminum_trade = 1 }
			}
			aluminum_button_sort_visible = {
				check_variable = { aluminum_trade = 0 }
			}
			oil_button_sorted_visible = {
				check_variable = { oil_trade = 1 }
			}
			oil_button_sort_visible = {
				check_variable = { oil_trade = 0 }
			}
		}
		properties = {
			country_flag_for_trade = {
				image = "[THIS.GetFlag]"
			}	
		}
		dynamic_lists = {
			chromium_trade_listing_grid = {
				array = chromiumExporters
				change_scope = yes
				entry_container = chromium_export_listing_entry
			}
		}
		effects = {
			sort_export_click = {	#Export Total
				sort_resource_number_chromium = yes
			}
			sort_request_click = {	#Export

			}
			sort_convoys_click = {	#Financial

			}
			nuclear_button_sorted_click = {
				set_variable = { nuclear_trade = 0 }
				clear_array = chromiumExporters
				clear_array = chromiumExporterInfo
			}
			nuclear_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { nuclear_trade = 1 }
				
				generate_available_chromium_import_array = yes
				sort_resource_number_chromium = yes
			}
			steel_button_sorted_click = {
				set_variable = { steel_trade = 0 }
			}
			steel_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { steel_trade = 1 }				
				generate_available_steel_import_array = yes
			}
			rare_earth_button_sorted_click = {
				set_variable = { rare_earth_trade = 0 }
			}
			rare_earth_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { rare_earth_trade = 1 }	
				generate_available_rare_earth_import_array = yes				
			}
			food_button_sorted_click = {
				set_variable = { food_trade = 0 }
			}
			food_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { food_trade = 1 }	
				generate_available_food_import_array = yes				
			}
			aluminum_button_sorted_click = {
				set_variable = { aluminum_trade = 0 }
			}
			aluminum_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { aluminum_trade = 1 }	
				generate_available_aluminum_import_array = yes				
			}
			oil_button_sorted_click = {
				set_variable = { oil_trade = 0 }
			}
			oil_button_sort_click = {
				
				set_variable = { steel_trade = 0 }
				set_variable = { nuclear_trade = 0 }
				set_variable = { rare_earth_trade = 0 }
				set_variable = { food_trade = 0 }
				set_variable = { aluminum_trade = 0 }
				set_variable = { oil_trade = 0 }
				set_variable = { oil_trade = 1 }	
				generate_available_oil_import_array = yes
			}
			#Grid
			buy_chromium_click = {
				set_variable = {
					ROOT.chromium_prompt = 1
				}
				set_variable = {
					ROOT.currentPurchaser = THIS.id
				}
				set_variable = {
					ROOT.currentAvailableChromiumExportPrompt = currentAvailableChromiumExport
				}
				set_variable = {
					ROOT.pricePerUnit = chromiumExporterPrice^ROOT
				}
				save_global_event_target_as = this_trade_country
				set_variable = {
					ROOT.purchase_amount = chromiumExportTargetAmount^ROOT 
				}
				set_variable = {
					ROOT.purchase_amount_prior = chromiumExportTargetAmount^ROOT 
				}
			}
		}
	}
}
